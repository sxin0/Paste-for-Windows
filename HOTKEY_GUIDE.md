# 🎯 Alt+V 快捷键功能指南

## 📋 功能概述

已成功为 Paste for Windows 添加了全局快捷键功能，现在可以通过快捷键快速操作剪贴板管理器。

## ⌨️ 快捷键配置

### 当前快捷键设置

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `Alt+V` | 显示/隐藏底部面板 | 显示或隐藏底部剪贴板历史面板 |

### 快捷键特点

- ✅ **全局生效**：在任何应用程序中都能使用
- ✅ **智能切换**：Alt+V 可以切换面板的显示/隐藏状态
- ✅ **安全可靠**：使用 keyboard 模块，稳定可靠
- ✅ **自动管理**：应用启动时自动注册，关闭时自动注销

## 🚀 使用方法

### 1. 启动应用

```bash
# 运行完整应用
python run.py

# 或者运行演示脚本
python demo_hotkey.py
```

### 2. 使用快捷键

1. **显示/隐藏底部面板**：
   - 按 `Alt+V` 显示剪贴板历史面板
   - 再次按 `Alt+V` 隐藏面板
   - 面板会从屏幕下方滑出/滑入

2. **关闭面板**：
   - 按 `ESC` 键关闭面板
   - 或者再次按 `Alt+V` 隐藏面板

## 🧪 测试功能

### 快捷键测试脚本

运行测试脚本验证快捷键功能：

```bash
python test_hotkey.py
```

测试步骤：
1. 启动测试窗口
2. 最小化窗口
3. 按 `Alt+V` 测试显示/隐藏功能
4. 观察状态反馈

### 演示脚本

运行演示脚本体验完整功能：

```bash
python demo_hotkey.py
```

演示功能：
- 显示底部面板
- 测试 Alt+V 显示/隐藏功能
- 查看快捷键状态

## 🔧 技术实现

### 快捷键管理器

位置：`src/utils/hotkey_manager.py`

核心功能：
- 全局快捷键注册和管理
- 线程安全的快捷键监听
- 自动资源清理
- 错误处理和状态检查

### 主要组件

```python
class HotkeyManager(QObject):
    # 信号定义
    toggle_bottom_panel_requested = pyqtSignal()  # 切换底部面板
    
    # 默认快捷键配置
    default_hotkeys = {
        'toggle_bottom_panel': 'alt+v'
    }
```

### 集成方式

在主窗口中集成快捷键管理器：

```python
# 连接快捷键信号
hotkey_manager.toggle_bottom_panel_requested.connect(self.toggle_bottom_panel)

# 启动快捷键管理器
if hotkey_manager.is_available():
    hotkey_manager.start()
```

## ⚙️ 配置选项

### 依赖要求

确保安装了必要的依赖：

```bash
pip install keyboard>=0.13.5
```

### 权限设置

在某些系统上可能需要管理员权限才能使用全局快捷键：

1. **Windows**：以管理员身份运行应用
2. **macOS**：在系统偏好设置中允许应用访问辅助功能
3. **Linux**：确保有适当的权限设置

## 🐛 故障排除

### 常见问题

**Q: 快捷键不工作怎么办？**
A: 检查以下几点：
- 确保已安装 keyboard 模块
- 尝试以管理员身份运行
- 检查是否有其他应用占用了快捷键
- 查看控制台输出的错误信息

**Q: 如何修改快捷键？**
A: 修改 `src/utils/hotkey_manager.py` 中的 `default_hotkeys` 配置：

```python
self.default_hotkeys = {
    'toggle_bottom_panel': 'alt+v'  # 修改这里的快捷键
}
```

**Q: 快捷键冲突怎么办？**
A: 如果与其他应用快捷键冲突：
- 修改快捷键配置
- 关闭冲突的应用
- 使用不同的快捷键组合

### 调试信息

启动应用时会显示快捷键注册状态：

```
✅ 已注册快捷键:
   - alt+v - 切换底部面板
```

## 📝 更新日志

### v1.1.0
- ✅ 添加全局快捷键支持
- ✅ 实现 Alt+V 显示/隐藏底部面板功能
- ✅ 添加快捷键测试和演示脚本
- ✅ 完善错误处理和状态管理

### v1.0.0
- ✅ 基础剪贴板管理功能
- ✅ 底部面板动画效果
- ✅ 系统托盘集成

## 🎯 使用建议

1. **推荐使用 Alt+V**：这是主要的显示/隐藏快捷键，使用频率最高
2. **ESC 关闭**：快速关闭面板的便捷方式
3. **托盘图标**：也可以通过双击托盘图标显示主窗口

## 🔮 未来计划

- [ ] 支持自定义快捷键配置
- [ ] 添加快捷键冲突检测
- [ ] 支持更多快捷键组合
- [ ] 添加快捷键学习模式 